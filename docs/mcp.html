<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP Integration - CiteKit</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        .mcp-section {
            max-width: 900px;
            margin: 96px auto;
            padding: 0 24px;
        }

        .mcp-section h1 {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 24px;
        }

        .mcp-section h2 {
            font-size: 32px;
            font-weight: 700;
            margin-top: 64px;
            margin-bottom: 24px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--color-border);
        }

        .mcp-section h3 {
            font-size: 24px;
            font-weight: 600;
            margin-top: 48px;
            margin-bottom: 16px;
            color: var(--color-brand);
        }

        .mcp-section p {
            margin-bottom: 16px;
            line-height: 1.7;
        }

        .mcp-section pre {
            background: var(--color-background-soft);
            padding: 24px;
            border-radius: 12px;
            margin: 24px 0;
            overflow-x: auto;
            border: 1px solid var(--color-border);
        }

        .mcp-section code {
            background: var(--color-background-mute);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 14px;
            font-family: var(--font-family-mono);
        }

        .mcp-section pre code {
            background: none;
            padding: 0;
        }

        .info-box {
            background: #ecf8f3;
            border-left: 4px solid var(--color-brand);
            padding: 16px 20px;
            margin: 24px 0;
            border-radius: 8px;
        }

        .info-box p {
            margin: 0;
            color: #2c3e50;
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="index.html"
                    style="display: flex; align-items: center; gap: 12px; text-decoration: none; color: inherit;">
                    <span class="logo">ðŸ“š</span>
                    <span class="brand-name">CiteKit</span>
                </a>
            </div>
            <ul class="nav-links">
                <li><a href="index.html#guide">Guide</a></li>
                <li><a href="api.html">API</a></li>
                <li><a href="examples.html">Examples</a></li>
                <li><a href="mcp.html">MCP</a></li>
                <li><a href="https://github.com/citekit/citekit" target="_blank">GitHub</a></li>
            </ul>
        </div>
    </nav>

    <div class="mcp-section">
        <h1><i class="fas fa-robot"></i> MCP Integration</h1>
        <p>Connect CiteKit to your AI agents using the Model Context Protocol (MCP).</p>

        <div class="info-box">
            <p><strong>What is MCP?</strong> The Model Context Protocol allows AI agents (like Claude Desktop, Cline) to
                access tools and data sources. CiteKit exposes an MCP server that lets agents read your local files
                intelligently.</p>
        </div>

        <h2>Available Tools</h2>
        <p>CiteKit's MCP server exposes three tools:</p>

        <h3>1. listResources</h3>
        <p>List all ingested resource IDs.</p>
        <pre><code>{
  <span class="string">"resources"</span>: [<span class="string">"research_paper"</span>, <span class="string">"tutorial_video"</span>]
}</code></pre>

        <h3>2. getStructure</h3>
        <p>Get the full map of a resource (all nodes and locations).</p>
        <pre><code>{
  <span class="string">"resource_id"</span>: <span class="string">"research_paper"</span>,
  <span class="string">"nodes"</span>: [
    {
      <span class="string">"id"</span>: <span class="string">"intro"</span>,
      <span class="string">"title"</span>: <span class="string">"Introduction"</span>,
      <span class="string">"location"</span>: {<span class="string">"pages"</span>: [1, 2]},
      ...
    }
  ]
}</code></pre>

        <h3>3. resolve</h3>
        <p>Extract specific content (mini-PDF, video clip, image crop).</p>
        <pre><code>{
  <span class="string">"output_path"</span>: <span class="string">".citekit_output/research_intro.pdf"</span>,
  <span class="string">"address"</span>: <span class="string">"doc://research_paper#pages=1-2"</span>
}</code></pre>

        <h2>Configuration</h2>

        <h3>Claude Desktop</h3>
        <p>Add this to your <code>claude_desktop_config.json</code>:</p>

        <pre><code>{
  <span class="string">"mcpServers"</span>: {
    <span class="string">"citekit"</span>: {
      <span class="string">"command"</span>: <span class="string">"citekit"</span>,
      <span class="string">"args"</span>: [<span class="string">"serve"</span>],
      <span class="string">"env"</span>: {
        <span class="string">"GEMINI_API_KEY"</span>: <span class="string">"your_gemini_api_key_here"</span>
      }
    }
  }
}</code></pre>

        <div class="info-box">
            <p><strong>Where is the config file?</strong><br>
                â€¢ <strong>Mac:</strong> <code>~/Library/Application Support/Claude/claude_desktop_config.json</code><br>
                â€¢ <strong>Windows:</strong> <code>%APPDATA%\Claude\claude_desktop_config.json</code></p>
        </div>

        <h3>Cline (VS Code)</h3>
        <p>In VS Code, open Cline settings and add:</p>

        <pre><code>{
  <span class="string">"citekit"</span>: {
    <span class="string">"command"</span>: <span class="string">"citekit"</span>,
    <span class="string">"args"</span>: [<span class="string">"serve"</span>],
    <span class="string">"env"</span>: {
      <span class="string">"GEMINI_API_KEY"</span>: <span class="string">"your_gemini_api_key_here"</span>
    }
  }
}</code></pre>

        <h3>Direct Usage (stdio)</h3>
        <p>You can also run the MCP server standalone:</p>

        <pre><code><span class="comment"># Python</span>
citekit serve

<span class="comment"># Or programmatically</span>
python -m citekit.mcp_server</code></pre>

        <h2>Workflow Example</h2>
        <p>Here's how an AI agent would use CiteKit:</p>

        <h3>Step 1: Ingest a file (one-time)</h3>
        <pre><code><span class="comment"># User runs this locally first</span>
citekit ingest research.pdf</code></pre>

        <h3>Step 2: Agent lists resources</h3>
        <pre><code><span class="comment"># Agent calls: listResources()</span>
<span class="comment"># Returns: ["research"]</span></code></pre>

        <h3>Step 3: Agent gets structure</h3>
        <pre><code><span class="comment"># Agent calls: getStructure("research")</span>
<span class="comment"># Returns full map with nodes</span></code></pre>

        <h3>Step 4: Agent resolves specific node</h3>
        <pre><code><span class="comment"># Agent calls: resolve("research", "methodology")</span>
<span class="comment"># Returns path to mini-PDF with just the methodology section</span></code></pre>

        <h2>Troubleshooting</h2>

        <h3>Command not found</h3>
        <p>If <code>citekit</code> is not in your PATH, use the full path:</p>
        <pre><code><span class="comment"># Mac/Linux</span>
<span class="string">"command"</span>: <span class="string">"/path/to/.venv/bin/citekit"</span>

<span class="comment"># Windows</span>
<span class="string">"command"</span>: <span class="string">"C:\\path\\to\\.venv\\Scripts\\citekit.exe"</span></code></pre>

        <h3>API Key Issues</h3>
        <p>Make sure your Gemini API key is valid. Get one at <a href="https://makersuite.google.com/app/apikey"
                target="_blank">Google AI Studio</a>.</p>

        <h3>No resources found</h3>
        <p>Run <code>citekit list</code> to verify files have been ingested. The server looks for maps in
            <code>.resource_maps/</code>.
        </p>
    </div>

    <footer class="footer">
        <div class="container">
            <p>Released under the MIT License.</p>
            <p>Copyright Â© 2026 CiteKit Team</p>
        </div>
    </footer>

    <script src="script.js"></script>
</body>

</html>